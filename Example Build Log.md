# Examples building log

A clearer summary is shown [here](https://github.com/lushl9301/XtratuM-Instruction/blob/master/Problem%20Summary.md).

----------------


This table shows the testings results when different conbinations of SDK subfolders are tried.

We copied the SDK generated by a 64-bit os into the given demo VM. The results are given under this table.

|              Testings in *demo VM*             |       |       |       |       |   |     |   |     |
|:----------------------------------------------:|:-----:|:-----:|:-----:|:-----:|:-:|:---:|:-:|:---:|
| **1** for my pc's SDK; **0** for demo VM's SDK |       |       |       |       |   |     |   |     |
|                       XM                       |   0   |   0   |   0   |   0   | 1 |  1  | 1 |  1  |
|                      Linux                     |   0   |   0   |   1   |   1   | 0 |  0  | 1 |  1  |
|                       XAL                      |   0   |   1   |   0   |   1   | 0 |  1  | 0 |  1  |
|                                                |       |       |       |       |   |     |   |     |
|                                                |       |       |       |       |   |     |   |     |
|         **1** for OKAY; **0** for fail         |       |       |       |       |   |     |   |     |
|                   Hello World                  |  *1*  |   0   |  *1*  |   0   | 0 | *1* | 0 | *1* |
|                   l2x0-2linux                  | **1** | **1** | **1** | **1** | 0 |  0  | 0 |  0  |

##### Results:

Hello World = ~(XM xor XAL) // *IFF* XM and XAL are from the **same source**

l2x0-2linux = ~XM // *IFF* XM from **demo VM**

##### Conclusion:

Linux loader doesn't really matter?


----------------


### Trying other ways
> **FAIL** Use the SDK on **my laptop**

*Hello World* Example fails:

This is the debug information
```sh
Page 0x0 does not belong to 0
```

*Linux kernel* Examples also fails:

```sh
[LinuxLoader] Jumping to 0xc0003000
[HW:xxxxxxx] event 16: sys 0: Id 0
0xXXXXXXXX 0xXXX 0xX
0x0 0x0
[HW:xxxxxxx] event 23: sys 1: Id 0
0xXXXXXXXX 0xXXX 0xX
0x0 0x0
System halted.
```

> **FAIL** Enlarge or shrink **qemu** virtual machine memory

> **FAIL** Change different **qemu** CPU architectures

The ```resident_sw.iso``` generated by given demo VM works fine with different CPUs.


-------


> **FAIL** Use the SDK copied directly from given **demo VM**

Same error as using the SDK generate by my laptop


-------


> **Success** Build runnable image from given **demo VM**

Able to boot in **qemu**; Fail to load GUI in **qemu** (qemu from either VM or my laptop) (it should fault; unable to mount hard disk)

Able to boot in **demo VM**; Able to load GUI *(The ONLY work-well condition)*

But only l2x0-2linux works fine, l1x0-1linux failed similarly as it on my laptop. (qemu system panic; demo VM booted, half way die)

> **FAIL** Use the images generated by **demo VM**

Able to boot; Half way die; Stop with
```sh
...... # a lot similar debug msg here
[     0.20xxx]  [<c0xxxxxx>] kernel_init+0x78/0x104
[     0.20xxx]  [<c0xxxxxx>] kernel_thread_helper+0x6/0xd
```


-------


> **FAIL** If using SDK generated by **my laptop** in **demo VM**

*Hello World* Example works

*Linux kernel* Examples fails at *\[LinuxLoader\]* in **qemu** virtual machine

> **FAIL** use resident_sw.iso generated by **my laptop** in **demo VM**

It should be noticed that generated *resident_sw.iso* is much smaller than a working image.


-------


> When comparing 2 SDK

There is one different; spare.h and spare schedular configuration; (I cannot change by menuconfig. but it doesn't really matter)


-------


> Keep using SDK provided in demo VM

> Copy the several lines mentioned above, make kernel again

```
error: no argument specified.
Press any key to continue...
```

Press some key, the kernel is loading. And again, half way die


-------


> Change Example's linux directory to current built kernel directory, modify kontron_defconfig and xtratum_defconfig

These two files are not involved in any source code, any linux kernel makefile.

Possibly, they are used in some binary/executable tools.

> **FAILE** Do not change kontron_defconfig and xtratum_defconfig, re-build original kernel code
No debug information, just XtratuM running message.


> **Currently, the whole SDK is not working... simple examples are not working well**


-------


> **FAIL** Re-do everything

copy sdk; linux-3.0.34-xm patched linux kernel;

**FAIL** when use the copied modules from demo VM

no booting

**FAIL** use the modules generate by kernel building

no booting

**FAIL** use original kernel source file after build

booted, half way die


-------


> **FAIL** re-install xtratum sdk 2.4

Hello world is not working...

> **FAIL** **SOLVED** demo VM examples not working


-------


```sh
qemu -m 512 -serial stdio -hda resident_sw.iso
```
No flags are supposed to be ignored. Otherwise, it will show errors.

> **FAIL** Change linux loader lds file

https://github.com/lushl9301/XtratuM-Instruction/commit/f71a9cfdb58cbc8dbe252d8f16dd384e8287f0a0

Make examples error.

```sh
ld: cannot find -lxm
```

-------


> Use SDK generated by my laptop works fine for demo VM.

**My SDK**

1. **OKAY** Hello World example works fine. (not using linux loader)

2. **FAIL** Linux example. (using linux loader)

**My SDK** linux folder replaced by demo VM's SDK

1. **OKAY** Hello World example works fine. (not using linux loader)

2. **FAIL** Linux example. (using linux loader)

**demo VM's SDK** linux folder replaced by my SDK

1. **OKAY** Hello World example works fine. (not using linux loader)

2. **OKAY** Linux example. (using linux loader)
