# Run XtratuM examples with Linux Kernel

> Build Kernel

This may be helpful

```
#backup
sudo cp /opt/linux-3.0.34-xm /opt/linux-3.0.34-xm.b
#use current running config
sudo cp /boot/config-3.x.x-amd64 /opt/linux-3.0.34-xm/
cd /opt/linux-3.0.34-xm/
sudo cp config-3.x.x-amd64 .config
sudo make localmodconfig
```
```
sudo make
sudo make modules
sudo make modules_install
sudo make install
```

This makes the built patched kernel has almost the same configuration as your current running conditions. Your drivers, modules should be roughly the same.

-------


> **FAIL** Use the SDK on my PC

*Hello World* Example fails:

This is the debug information
```sh
Page 0x0 does not belong to 0
```

*Linux kernel* Examples also fails:

```sh
[LinuxLoader] Jumping to 0xc0003000
[HW:xxxxxxx] event 16: sys 0: Id 0
0xXXXXXXXX 0xXXX 0xX
0x0 0x0
[HW:xxxxxxx] event 23: sys 1: Id 0
0xXXXXXXXX 0xXXX 0xX
0x0 0x0
System halted.
```

> **FAIL** Enlarge or shrink qemu virtual machine memory

> **FAIL** Change different qemu CPU architectures

The resident_sw.iso generated by given demo VM works fine with different CPUs.


-------


> **FAIL** Use the SDK copied directly from given demo image

Same error as using the SDK generate by my laptop


-------


> **Success** Build runnable image from given demo VM

Able to boot in qemu; Fail to load GUI in qemu (qemu from either VM or my laptop)

Able to boot in demo VM; Able to load GUI *(The ONLY work-well condition)*

But only l2x0-2linux works fine, l1x0-1linux failed similarly as it on my laptop. (qemu system panic; demo VM booted, half way die)

> **FAIL** Use the images generated by demo VM

Able to boot; Half way die; Stop with
```sh
[     0.20xxx]  [<c0xxxxxx>] kernel_init+0x78/0x104
[     0.20xxx]  [<c0xxxxxx>] kernel_thread_helper+0x6/0xd
```


-------


> If using SDK generated by my laptop in demo VM

*Hello World* Example works

*Linux kernel* Examples fails at *\[LinuxLoader\]*

> If using resident_sw.iso generated by my laptop in demo VM

**FAIL**

> It should be noticed that generated *resident_sw.iso* is much smaller than a working image.
